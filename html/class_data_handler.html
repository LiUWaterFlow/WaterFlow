<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Waterflow: DataHandler Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Waterflow
   
   </div>
   <div id="projectbrief">Visualize water in terrain</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('class_data_handler.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">DataHandler Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="DataHandler" -->
<p>Loads and modifies terrain data for easier use.  
 <a href="class_data_handler.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="read_data_8h_source.html">readData.h</a>&gt;</code></p>

<p><a href="class_data_handler-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_handler.html#aa3d0e08cb12b557440fd97df8a016dab">DataHandler</a> (const char *inputfile, int <a class="el" href="class_data_handler.html#ad13bf156e22a6c65985e779cd40f3411">sampleFactor</a>=1, int <a class="el" href="class_data_handler.html#aa8995b277e70e234aa748e88492578e4">blockSize</a>=250)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads DEM data, scales it and generates a model.  <a href="#aa3d0e08cb12b557440fd97df8a016dab"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a25f2ab01e70edd3a1c8b0ac4f25e0cd4"></a><!-- doxytag: member="DataHandler::~DataHandler" ref="a25f2ab01e70edd3a1c8b0ac4f25e0cd4" args="()" -->
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_handler.html#a25f2ab01e70edd3a1c8b0ac4f25e0cd4">~DataHandler</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle the internal pointers. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_handler.html#a439774a91fe8218fe6fffe5882102608">getCoord</a> (int col, int row)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a datapoint from the mapdata.  <a href="#a439774a91fe8218fe6fffe5882102608"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">float *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_handler.html#af2d7f859a1cf709469623f0a8230b49b">getData</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a pointer to the mapdata data.  <a href="#af2d7f859a1cf709469623f0a8230b49b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_handler.html#a9e505125aaa7270ae2475ba09c4b1111">getDataHeight</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter for the height of the data.  <a href="#a9e505125aaa7270ae2475ba09c4b1111"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_handler.html#a59d4bfabc536dc25f3f8ecc5c7072e8d">getDataWidth</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter for the width of the data.  <a href="#a59d4bfabc536dc25f3f8ecc5c7072e8d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_handler.html#a91942a6386e768c7bed670f50e1c7ba7">getElem</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter for the number of datapoints.  <a href="#a91942a6386e768c7bed670f50e1c7ba7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="struct_model.html">Model</a> * &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_handler.html#a0f9751c37a90dcf458e4814a5d0a3447">getModel</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to the terrain model.  <a href="#a0f9751c37a90dcf458e4814a5d0a3447"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_handler.html#a999feaf0f3f71e3c20693b495f8f549d">getModelHeight</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter for the height of the terrain model.  <a href="#a999feaf0f3f71e3c20693b495f8f549d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_handler.html#a963a4a7e19c288853de5cf7647564352">getModelWidth</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter for the width of the terrain model.  <a href="#a963a4a7e19c288853de5cf7647564352"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_handler.html#a20f0ef4392a50220418a9c4024dcf129">getSampleFactor</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the sampling rate of data for constructing the model.  <a href="#a20f0ef4392a50220418a9c4024dcf129"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">GLfloat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_handler.html#a7f6dfabebf0453f459bc9f085c877bd8">getTerrainScale</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the terrain scale.  <a href="#a7f6dfabebf0453f459bc9f085c877bd8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">GLfloat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_handler.html#ad025e108c9d923261eb02d7a7af0f1f7">giveHeight</a> (GLfloat x, GLfloat z)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Gives a height for a certain position in the terrain.  <a href="#ad025e108c9d923261eb02d7a7af0f1f7"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_handler.html#a90bd32bd79aeace98e9faec378e5bf22">calculateNormalsGPU</a> (GLfloat *vertexArray, GLfloat *normalArray, int width, int height)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the normals for the whole terrain on the GPU.  <a href="#a90bd32bd79aeace98e9faec378e5bf22"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_handler.html#aea5187c7fba2cf4828a8cd3001665b0c">GenerateTerrain</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Generates terrain with the scale from terrainScale.  <a href="#aea5187c7fba2cf4828a8cd3001665b0c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_handler.html#a8409a68f2aeb6b6d77e3f8cd0b7150e9">performNormalizedConvolution</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes NODATA by normalized convolution.  <a href="#a8409a68f2aeb6b6d77e3f8cd0b7150e9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_handler.html#af4235e3832fa5c54a80bd99fb0fa65ea">readDEM</a> (const char *inputfile)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the input data to the private mapdata struct.  <a href="#af4235e3832fa5c54a80bd99fb0fa65ea"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_handler.html#a2c27269a72ae5429361231384fe04489">scaleDataAfter</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Scales data when NODATA has been removed.  <a href="#a2c27269a72ae5429361231384fe04489"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_handler.html#a1e3625f30cbc603e7dc65216cc7a513d">scaleDataBefore</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Scales data while NODATA is present.  <a href="#a1e3625f30cbc603e7dc65216cc7a513d"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa8995b277e70e234aa748e88492578e4"></a><!-- doxytag: member="DataHandler::blockSize" ref="aa8995b277e70e234aa748e88492578e4" args="" -->
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_handler.html#aa8995b277e70e234aa748e88492578e4">blockSize</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Size of each model block. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a997fc54e66096fbd01e4b3b74eec3b47"></a><!-- doxytag: member="DataHandler::datamodel" ref="a997fc54e66096fbd01e4b3b74eec3b47" args="" -->
std::vector&lt; <a class="el" href="struct_model.html">Model</a> * &gt; *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_handler.html#a997fc54e66096fbd01e4b3b74eec3b47">datamodel</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">model for the terrain data. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a07ac01ed64a68b18e655df5c7517cbbb"></a><!-- doxytag: member="DataHandler::readdata" ref="a07ac01ed64a68b18e655df5c7517cbbb" args="" -->
<a class="el" href="structmapdata.html">mapdata</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_handler.html#a07ac01ed64a68b18e655df5c7517cbbb">readdata</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">mapdata struct for the loaded terrain data. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad13bf156e22a6c65985e779cd40f3411"></a><!-- doxytag: member="DataHandler::sampleFactor" ref="ad13bf156e22a6c65985e779cd40f3411" args="" -->
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_handler.html#ad13bf156e22a6c65985e779cd40f3411">sampleFactor</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sample factor used for constructing model. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6a562e7955d84593a664560e2a0e41ce"></a><!-- doxytag: member="DataHandler::terrainScale" ref="a6a562e7955d84593a664560e2a0e41ce" args="" -->
GLfloat&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_data_handler.html#a6a562e7955d84593a664560e2a0e41ce">terrainScale</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Height scale for the terrain. Calculated as the diff between min and max in the input data. <br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Loads and modifies terrain data for easier use. </p>
<p>Use the <a class="el" href="class_data_handler.html" title="Loads and modifies terrain data for easier use.">DataHandler</a> class to import terrain data and generate terrain. It automatically scales the data for easier filtering, and also generates an initial terrain from the data after the data is loaded. </p>

<p>Definition at line <a class="el" href="read_data_8h_source.html#l00038">38</a> of file <a class="el" href="read_data_8h_source.html">readData.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aa3d0e08cb12b557440fd97df8a016dab"></a><!-- doxytag: member="DataHandler::DataHandler" ref="aa3d0e08cb12b557440fd97df8a016dab" args="(const char *inputfile, int sampleFactor=1, int blockSize=250)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_data_handler.html#aa3d0e08cb12b557440fd97df8a016dab">DataHandler::DataHandler</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>inputfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sampleFactor</em> = <code>1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>blockSize</em> = <code>250</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reads DEM data, scales it and generates a model. </p>
<p>Reads the inputfile for DEM data and populates a mapdata struct, scales the data using <a class="el" href="class_data_handler.html#a1e3625f30cbc603e7dc65216cc7a513d" title="Scales data while NODATA is present.">scaleDataBefore()</a> and creates the initial environment for Normalized convolution and finally generates an initial terrain. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">inputfile</td><td>path to DEM data. </td></tr>
    <tr><td class="paramname">sampleFactor</td><td>Downsampling factor for the terrain. Must be a power of 2. [1,2,4...] default value is 1. (No downsampling). Note that the terrainScale will be used as tScale/sampleFactor. So a downsampling should not change the overall proportions of the model </td></tr>
    <tr><td class="paramname">tScale</td><td>sets terrainScale, default value is 500.0f </td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="class_data_handler.html#af4235e3832fa5c54a80bd99fb0fa65ea" title="Reads the input data to the private mapdata struct.">readDEM()</a> </dd>
<dd>
<a class="el" href="class_data_handler.html#a1e3625f30cbc603e7dc65216cc7a513d" title="Scales data while NODATA is present.">scaleDataBefore()</a> </dd>
<dd>
<a class="el" href="class_data_handler.html#aea5187c7fba2cf4828a8cd3001665b0c" title="Generates terrain with the scale from terrainScale.">GenerateTerrain()</a> </dd></dl>

<p>Definition at line <a class="el" href="read_data_8cpp_source.html#l00022">22</a> of file <a class="el" href="read_data_8cpp_source.html">readData.cpp</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a90bd32bd79aeace98e9faec378e5bf22"></a><!-- doxytag: member="DataHandler::calculateNormalsGPU" ref="a90bd32bd79aeace98e9faec378e5bf22" args="(GLfloat *vertexArray, GLfloat *normalArray, int width, int height)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_data_handler.html#a90bd32bd79aeace98e9faec378e5bf22">DataHandler::calculateNormalsGPU</a> </td>
          <td>(</td>
          <td class="paramtype">GLfloat *&#160;</td>
          <td class="paramname"><em>vertexArray</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GLfloat *&#160;</td>
          <td class="paramname"><em>normalArray</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>height</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Calculates the normals for the whole terrain on the GPU. </p>
<p>The normals are calculated using a 3x3 sobel filter in x and z direction and then normalized. This is used in <a class="el" href="class_data_handler.html#aea5187c7fba2cf4828a8cd3001665b0c" title="Generates terrain with the scale from terrainScale.">GenerateTerrain()</a> to speed up the normal calculations. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">normalArray</td><td>this is the normalArray for the model that should be used. </td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="class_data_handler.html#aea5187c7fba2cf4828a8cd3001665b0c" title="Generates terrain with the scale from terrainScale.">GenerateTerrain()</a> </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000003">Todo:</a></b></dt><dd>The scaling for the y component is currently arbitrary and might need some investigation if it should scale with some parameter. </dd></dl>

<p>Definition at line <a class="el" href="read_data_8cpp_source.html#l00403">403</a> of file <a class="el" href="read_data_8cpp_source.html">readData.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="aea5187c7fba2cf4828a8cd3001665b0c"></a><!-- doxytag: member="DataHandler::GenerateTerrain" ref="aea5187c7fba2cf4828a8cd3001665b0c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_data_handler.html#aea5187c7fba2cf4828a8cd3001665b0c">DataHandler::GenerateTerrain</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Generates terrain with the scale from terrainScale. </p>
<p>The output terrain is stored in the private model. Written by Ingemar Ragnemalm but slightly modfied </p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000002">Todo:</a></b></dt><dd>Currently no handling of the previous model is done if <a class="el" href="class_data_handler.html#aea5187c7fba2cf4828a8cd3001665b0c" title="Generates terrain with the scale from terrainScale.">GenerateTerrain()</a> is called multiple times.</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd>giveNormal() </dd>
<dd>
<a class="el" href="class_data_handler.html#ad025e108c9d923261eb02d7a7af0f1f7" title="Gives a height for a certain position in the terrain.">giveHeight()</a> </dd></dl>

<p>Definition at line <a class="el" href="read_data_8cpp_source.html#l00302">302</a> of file <a class="el" href="read_data_8cpp_source.html">readData.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a439774a91fe8218fe6fffe5882102608"></a><!-- doxytag: member="DataHandler::getCoord" ref="a439774a91fe8218fe6fffe5882102608" args="(int col, int row)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float <a class="el" href="class_data_handler.html#a439774a91fe8218fe6fffe5882102608">DataHandler::getCoord</a> </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>col</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>row</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns a datapoint from the mapdata. </p>
<p>Simplifies the getting of data by allowing access by coordinate since the data is stored in a linear vector. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">col</td><td>input column </td></tr>
    <tr><td class="paramname">row</td><td>input row </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>data(col,row) </dd></dl>

<p>Definition at line <a class="el" href="read_data_8cpp_source.html#l00049">49</a> of file <a class="el" href="read_data_8cpp_source.html">readData.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="af2d7f859a1cf709469623f0a8230b49b"></a><!-- doxytag: member="DataHandler::getData" ref="af2d7f859a1cf709469623f0a8230b49b" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float * <a class="el" href="class_data_handler.html#af2d7f859a1cf709469623f0a8230b49b">DataHandler::getData</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get a pointer to the mapdata data. </p>
<p>For uses like read all data to FBO or from GPU back to CPU. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>pointer to the beginning of the mapdata data. </dd></dl>

<p>Definition at line <a class="el" href="read_data_8cpp_source.html#l00077">77</a> of file <a class="el" href="read_data_8cpp_source.html">readData.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a9e505125aaa7270ae2475ba09c4b1111"></a><!-- doxytag: member="DataHandler::getDataHeight" ref="a9e505125aaa7270ae2475ba09c4b1111" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_data_handler.html#a9e505125aaa7270ae2475ba09c4b1111">DataHandler::getDataHeight</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Getter for the height of the data. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of rows. </dd></dl>

<p>Definition at line <a class="el" href="read_data_8cpp_source.html#l00089">89</a> of file <a class="el" href="read_data_8cpp_source.html">readData.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a59d4bfabc536dc25f3f8ecc5c7072e8d"></a><!-- doxytag: member="DataHandler::getDataWidth" ref="a59d4bfabc536dc25f3f8ecc5c7072e8d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_data_handler.html#a59d4bfabc536dc25f3f8ecc5c7072e8d">DataHandler::getDataWidth</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Getter for the width of the data. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of columns. </dd></dl>

<p>Definition at line <a class="el" href="read_data_8cpp_source.html#l00081">81</a> of file <a class="el" href="read_data_8cpp_source.html">readData.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a91942a6386e768c7bed670f50e1c7ba7"></a><!-- doxytag: member="DataHandler::getElem" ref="a91942a6386e768c7bed670f50e1c7ba7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_data_handler.html#a91942a6386e768c7bed670f50e1c7ba7">DataHandler::getElem</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Getter for the number of datapoints. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>columns * rows. </dd></dl>

<p>Definition at line <a class="el" href="read_data_8cpp_source.html#l00097">97</a> of file <a class="el" href="read_data_8cpp_source.html">readData.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a0f9751c37a90dcf458e4814a5d0a3447"></a><!-- doxytag: member="DataHandler::getModel" ref="a0f9751c37a90dcf458e4814a5d0a3447" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="struct_model.html">Model</a> * &gt; * <a class="el" href="class_data_handler.html#a0f9751c37a90dcf458e4814a5d0a3447">DataHandler::getModel</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pointer to the terrain model. </p>
<p>Used to get the model for drawing in the main program </p>
<dl class="return"><dt><b>Returns:</b></dt><dd><a class="el" href="struct_model.html">Model</a> to draw. </dd></dl>

<p>Definition at line <a class="el" href="read_data_8cpp_source.html#l00105">105</a> of file <a class="el" href="read_data_8cpp_source.html">readData.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a999feaf0f3f71e3c20693b495f8f549d"></a><!-- doxytag: member="DataHandler::getModelHeight" ref="a999feaf0f3f71e3c20693b495f8f549d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_data_handler.html#a999feaf0f3f71e3c20693b495f8f549d">DataHandler::getModelHeight</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Getter for the height of the terrain model. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>height of the model </dd></dl>

<p>Definition at line <a class="el" href="read_data_8cpp_source.html#l00093">93</a> of file <a class="el" href="read_data_8cpp_source.html">readData.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a963a4a7e19c288853de5cf7647564352"></a><!-- doxytag: member="DataHandler::getModelWidth" ref="a963a4a7e19c288853de5cf7647564352" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_data_handler.html#a963a4a7e19c288853de5cf7647564352">DataHandler::getModelWidth</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Getter for the width of the terrain model. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>width of the model </dd></dl>

<p>Definition at line <a class="el" href="read_data_8cpp_source.html#l00085">85</a> of file <a class="el" href="read_data_8cpp_source.html">readData.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a20f0ef4392a50220418a9c4024dcf129"></a><!-- doxytag: member="DataHandler::getSampleFactor" ref="a20f0ef4392a50220418a9c4024dcf129" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="class_data_handler.html#a20f0ef4392a50220418a9c4024dcf129">DataHandler::getSampleFactor</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the sampling rate of data for constructing the model. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>int value of the sample rate. </dd></dl>

<p>Definition at line <a class="el" href="read_data_8cpp_source.html#l00073">73</a> of file <a class="el" href="read_data_8cpp_source.html">readData.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a7f6dfabebf0453f459bc9f085c877bd8"></a><!-- doxytag: member="DataHandler::getTerrainScale" ref="a7f6dfabebf0453f459bc9f085c877bd8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GLfloat <a class="el" href="class_data_handler.html#a7f6dfabebf0453f459bc9f085c877bd8">DataHandler::getTerrainScale</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the terrain scale. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Return a float of the diff between max and min sample in the data. </dd></dl>

<p>Definition at line <a class="el" href="read_data_8cpp_source.html#l00101">101</a> of file <a class="el" href="read_data_8cpp_source.html">readData.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ad025e108c9d923261eb02d7a7af0f1f7"></a><!-- doxytag: member="DataHandler::giveHeight" ref="ad025e108c9d923261eb02d7a7af0f1f7" args="(GLfloat x, GLfloat z)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">GLfloat <a class="el" href="class_data_handler.html#ad025e108c9d923261eb02d7a7af0f1f7">DataHandler::giveHeight</a> </td>
          <td>(</td>
          <td class="paramtype">GLfloat&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GLfloat&#160;</td>
          <td class="paramname"><em>z</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gives a height for a certain position in the terrain. </p>
<p>Used if the interpolated height data for a certain point is needed Written by Ingemar Ragnemalm but slightly modfied </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>input width position </td></tr>
    <tr><td class="paramname">z</td><td>input depth position </td></tr>
    <tr><td class="paramname">vertexArray</td><td>input data </td></tr>
    <tr><td class="paramname">width</td><td>size of the input data </td></tr>
    <tr><td class="paramname">height</td><td>size of the input data </td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="class_data_handler.html#aea5187c7fba2cf4828a8cd3001665b0c" title="Generates terrain with the scale from terrainScale.">GenerateTerrain()</a> </dd>
<dd>
giveNormal() </dd></dl>

<p>Definition at line <a class="el" href="read_data_8cpp_source.html#l00445">445</a> of file <a class="el" href="read_data_8cpp_source.html">readData.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a8409a68f2aeb6b6d77e3f8cd0b7150e9"></a><!-- doxytag: member="DataHandler::performNormalizedConvolution" ref="a8409a68f2aeb6b6d77e3f8cd0b7150e9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_data_handler.html#a8409a68f2aeb6b6d77e3f8cd0b7150e9">DataHandler::performNormalizedConvolution</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Removes NODATA by normalized convolution. </p>
<p>Runs several passes of performGPUNormConv() until there are no more NODATA values present in the data. Runs 5 passes before reading the data back to the CPU and checking the data. When no NODATA is present <a class="el" href="class_data_handler.html#a2c27269a72ae5429361231384fe04489" title="Scales data when NODATA has been removed.">scaleDataAfter()</a> is performed and a new model is generated. First filters the data with LP filter replacing only NODATA, second calculates confidence binary image, third filter the confidence image with LP to match first pass, fourth combine the confidence and initial pass to perform the normalized convolution. A final pass is performed to set the correct data in FBO's to simplify repeated use. </p>
<dl class="see"><dt><b>See also:</b></dt><dd>performGPUNormConv() </dd>
<dd>
<a class="el" href="class_data_handler.html#a2c27269a72ae5429361231384fe04489" title="Scales data when NODATA has been removed.">scaleDataAfter()</a> </dd>
<dd>
<a class="el" href="class_data_handler.html#aea5187c7fba2cf4828a8cd3001665b0c" title="Generates terrain with the scale from terrainScale.">GenerateTerrain()</a> </dd></dl>

<p>Definition at line <a class="el" href="read_data_8cpp_source.html#l00181">181</a> of file <a class="el" href="read_data_8cpp_source.html">readData.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="af4235e3832fa5c54a80bd99fb0fa65ea"></a><!-- doxytag: member="DataHandler::readDEM" ref="af4235e3832fa5c54a80bd99fb0fa65ea" args="(const char *inputfile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_data_handler.html#af4235e3832fa5c54a80bd99fb0fa65ea">DataHandler::readDEM</a> </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>inputfile</em></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reads the input data to the private mapdata struct. </p>
<p>Currently uses fscanf for better performance. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">inputfile</td><td>path to DEM data file. </td></tr>
  </table>
  </dd>
</dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000001">Todo:</a></b></dt><dd>Possible performance improvement using fread instead. </dd></dl>

<p>Definition at line <a class="el" href="read_data_8cpp_source.html#l00112">112</a> of file <a class="el" href="read_data_8cpp_source.html">readData.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a2c27269a72ae5429361231384fe04489"></a><!-- doxytag: member="DataHandler::scaleDataAfter" ref="a2c27269a72ae5429361231384fe04489" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_data_handler.html#a2c27269a72ae5429361231384fe04489">DataHandler::scaleDataAfter</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Scales data when NODATA has been removed. </p>
<p>Used after normalized convolution to stretch data to 0.0 to 1.0. The data in the mapdata struct should already be scaled with <a class="el" href="class_data_handler.html#a1e3625f30cbc603e7dc65216cc7a513d" title="Scales data while NODATA is present.">scaleDataBefore()</a> for this to work correctly.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="class_data_handler.html#a1e3625f30cbc603e7dc65216cc7a513d" title="Scales data while NODATA is present.">scaleDataBefore()</a> </dd>
<dd>
<a class="el" href="class_data_handler.html#a8409a68f2aeb6b6d77e3f8cd0b7150e9" title="Removes NODATA by normalized convolution.">performNormalizedConvolution()</a> </dd></dl>

<p>Definition at line <a class="el" href="read_data_8cpp_source.html#l00293">293</a> of file <a class="el" href="read_data_8cpp_source.html">readData.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a1e3625f30cbc603e7dc65216cc7a513d"></a><!-- doxytag: member="DataHandler::scaleDataBefore" ref="a1e3625f30cbc603e7dc65216cc7a513d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="class_data_handler.html#a1e3625f30cbc603e7dc65216cc7a513d">DataHandler::scaleDataBefore</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [private]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Scales data while NODATA is present. </p>
<p>Input data will be scaled between 0.1 and 1.0 and NODATA will be given the value 0.0 so that input can be used in normalized convolution.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="class_data_handler.html#a2c27269a72ae5429361231384fe04489" title="Scales data when NODATA has been removed.">scaleDataAfter()</a> </dd>
<dd>
<a class="el" href="class_data_handler.html#a8409a68f2aeb6b6d77e3f8cd0b7150e9" title="Removes NODATA by normalized convolution.">performNormalizedConvolution()</a> </dd>
<dd>
<a class="el" href="class_data_handler.html#aa3d0e08cb12b557440fd97df8a016dab" title="Reads DEM data, scales it and generates a model.">DataHandler()</a> </dd></dl>

<p>Definition at line <a class="el" href="read_data_8cpp_source.html#l00166">166</a> of file <a class="el" href="read_data_8cpp_source.html">readData.cpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/<a class="el" href="read_data_8h_source.html">readData.h</a></li>
<li>src/<a class="el" href="read_data_8cpp_source.html">readData.cpp</a></li>
</ul>
</div><!-- contents -->
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="class_data_handler.html">DataHandler</a>      </li>

    <li class="footer">Generated on Fri Oct 9 2015 10:22:46 for Waterflow by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
